\documentclass{article}

\usepackage[norsk]{babel}
\usepackage{chicago}
\usepackage[T1]{fontenc}
\usepackage{footnote}
\usepackage[dvips]{hyperref}
\usepackage{listings}
\usepackage{multirow}
\usepackage{tipa}
\usepackage{verbatim}

%\newcommand\note[1]{\marginpar{\raggedright\tiny#1}}
\newcommand\link[1]{\href{#1}{#1}}

\let\code\texttt
\let\form\emph
\let\lib\emph
\let\prog\texttt
\let\tipa\textipa
\let\w\emph

\title{Toniv\aa{}morfologi for latin\footnote{Rapporten er ogs\aa{}
tilgjengelig som PDF fra \link{http://heim.ifi.uio.no/arnskj/latin/report.pdf}}}
%\author{Kandidat 6472}
%\author{Arne Skj\ae{}rholt}
\date{} % XXX: Ja of nee?

\begin{document}
\maketitle

\section{Introduksjon}
%\subsection{Historisk bakgrunn}
Denne oppgaven presenterer funksjonaliteten og implementasjonen til et system
for analyse og generering av latinsk morfologi. Systemet bygger p\aa{} en
generativ toniv\aa{}-modell for latinsk morfologi, implementert i
Xerox-verkt\o{}y\-kassen for endelige tilstandsmaskiner.

Tradisjonelle generative modeller for morfologi ble skrevet som
kontekst-sensitive omskrivningsregler p\aa{} m\o{}nsteret $\alpha \to
\beta/\gamma \_ \delta$: $\alpha$ omskrives til $\beta$ mellom $\gamma$ og
$\delta$, der $\alpha$, $\beta$, $\gamma$ og $\delta$ er vilk\aa{}rlig
kompliserte strenger. I det generelle tilfellet er slike regler et meget
vanskelig problem \aa{} l\o{}se\footnote{Problemet er det som kalles
PSPACE-komplett. Dette inneb\ae{}rer antageligvis at tiden det tar \aa{}
l\o{}se problemet tar tid som \o{}ker eksponensielt med st\o{}rrelsen p\aa{}
grammatikken. Hvorvidt dette faktisk er tilfelle er et av de store ul\o{}ste
problemene i teoretisk informatikk, men den gjengse oppfatning er at dette er
tilfelle.}, men det viser seg at man i generativ morfologi antar at man
beveger seg videre etter at en omskrivning er utf\o{}rt. Dette inneb\ae{}rer
at n\aa{}r $\gamma\alpha\delta$ er omskrevet til $\gamma\beta\delta$ forblir
$\beta$-delen uendret, og man fortsetter \aa{} omskrive til h\o{}yre eller
venstre for $\beta$. Dette endrer kompleksiteten p\aa{} problemet radikalt, og
dette problemet viser seg \aa{} kunne l\o{}ses med endelige
tilstandsmaskiner\footnote{Et problem som kan l\o{}ses i polynomisk tid.}.
Dette arbeidet begynte p\aa{} 60-tallet og kuliminerte i Kimmo Koskenniemis
toniv\aa{}formalisme i 1983, som fort ble det gjeldende paradigmet i feltet
\cite{twolc}. Kort fortalt inneb\ae{}rer toniv\aa{}formalismen at man opererer
med to morfologiske niv\aa{}er: et leksikalsk niv\aa{} og et
overflateniv\aa{}. P\aa{} det leksikalske niv\aa{}et er ordet et lemma med en
serie morfologiske tagger, som til sammen beskriver en eller annen form. En
regul\ae{}r relasjon beskriver s\aa{} forholdet mellom en leksikonform og de
mulige overflateformene, det vil si de mulige realiseringene i spr\aa{}ket
\cite{jnm}.

%\subsection{Form\aa{}l}
Selv om problemet viser seg \aa{} v\ae{}re beregningsmessing forholdsvis lett
\aa{} h\aa{}ndtere, er det \aa{} implementere en komplett toniv\aa{}modell
ikke en triviell oppgave. Det er blant annet skrevet hovedfagsoppgaver der
m\aa{}let er nettopp dette, se \citeN{bondihoved} og \citeN{french}. M\aa{}let
for dette prosjektet har derfor v\ae{}rt \aa{} implementere en delmengde av
det latinske formverket som er s\aa{} interessant som mulig; der interessant
er definert slik at s\aa{} mange implementasjonstekniske problemer som mulig
blir eksponert. Uregelmessige former, selv om de kanskje rent praktisk sett er
veldig interessante, er for eksempel ikke s\ae{}rlig inspirerende i denne
sammenhengen ettersom implementasjonen stort sett kan oppsummeres som ``for
denne roten ser denne formen slik ut''.

%\subsection{Planen}
Den planlagte fremgangsm\aa{}ten, som stort sett korresponderer med den
faktiske gangen i arbeidet med implementasjonen, var \aa{} begynne i det
sm\aa{} med regelrette substantiver for \aa{} bli kjent med verkt\o{}yene og
gi grunnleggende f\o{}ringer p\aa{} hvordan de kan integreres med standard
UNIX-verkt\o{}y som \prog{make} for \aa{} automatisere kompilasjonsprosessen.
Etter dette sto verbalsystemet for tur. Siden verbalparadigmet er den mest
kompliserte delen av den latinske morfologien ans\aa{} jeg det som viktig
\aa{} utforske denne delen av systemet for \aa{} finne ut hvor kompliserte
regler som trengtes. Etter dette var planen \aa{} implementere det som gjensto
av de regelrette verbal-- og substantivparadigmene.

%\subsection{Funksjonalitet}
I sin n\aa{}v\ae{}rende form analyserer og genererer systemet verb--,
substantiv-- og adjektivformer for leksikonet gitt i tabell \ref{leksikon}.
For substantiv skal applikasjonen ha full dekning for regelrette ord i
f\o{}rste, andre, fjerde og femte deklinasjon. I den tredje deklinasjonen
mangler paradigmene p\aa{} \w{--ium} i genitiv flertall. Systemet skal
ogs\aa{} klare regelrette adjektiver i alle kj\o{}nn og grader, samt deres
avledede adverber. I verbalparadigmet skal det ogs\aa{} v\ae{}re full dekning
for regelrette verb, b\aa{}de vanlige og deponente verb, etter alle de fire
konjugasjonene, inklusive i-stammeverbene i tredje konjugasjon (eksklusive
perifrastiske former).

\begin{table}
\begin{center}
\begin{tabular}{|ccc|}
    \hline
Substantiv  & Adjektiv    & Verb \\
    \hline
\w{rosa}    & \w{longus}  & \w{amo}     \\
\w{dominus} & \w{pulcher} & \w{hortor}  \\
\w{numerus} & \w{acer}    & \w{moneo}   \\
\w{filius}  & \w{brevis}  & \w{vereor}  \\
\w{puer}    & \w{felix}   & \w{rego}    \\
\w{ager}    &             & \w{sequor}  \\
\w{bellum}  &             & \w{capio}   \\
\w{rex}     &             & \w{patior}  \\
\w{corpus}  &             & \w{audio}   \\
\w{fructus} &             & \w{partior} \\
\w{cornus}  &             &             \\
\w{res}     &             &             \\
    \hline
\end{tabular}
\end{center}
\caption{Leksikon}
\label{leksikon}
\end{table}

Vi skal n\aa{} f\o{}rst se p\aa{} hvilken programvare systemet er avhengig av,
hva slags modell som ligger til grunn for implementasjonen, og hvordan selve
implementasjonen er utf\o{}rt. Til slutt skal vi s\aa{} hvordan systemet
passer inn i en mer teoretisk lingvistisk kontekst.

\section{Implementasjonen}
%\subsection{N\o{}dvendig programvare}
For \aa{} kompilere selve morfologidelen av applikasjonen trengs bare
Xerox-verkt\o{}y\-kassen for endelige tilstandsmaskiner (XFST), og en
implementasjon av \prog{make} for \aa{} bygge applikasjonen (applikasjonen kan
ogs\aa{} bygges manuelt). I tillegg trenger testsuiten Python-grensesnittet mot
XFST\footnote{\href{http://www.stanford.edu/~laurik/.book2software/download.html}
{http://www.stanford.edu/\~{}laurik/.book2software/download.html}}, biblioteket
\lib{PyTAP}\footnote{\link{http://git.codesimply.com/?p=PyTAP.git;a=summary}}
og applikasjonen \prog{prove} fra Perl-biblioteket
\lib{Test::Harness}\footnote{\href{http://search.cpan.org/~andya/Test-Harness/}
{http://search.cpan.org/\~{}andya/Test-Harness/}},
versjon 3 eller h\o{}yere.
Webgrensesnittet\footnote{\link{http://heim.ifi.uio.no/arnskj/cgi-bin/latin/analyse.cgi}}
krever bare Python-grensesnittet mot XFST.

XFST gir tre alternativer for \aa{} skrive endelige tilstandsautomater:
\prog{xfst}, \prog{lexc} og \prog{twolc}. \prog{xfst} er et generelt
verkt\o{}y for \aa{} skrive automater, og fungerer generelt p\aa{} et for lavt
niv\aa{} for dette prosjektet og brukes bare for \aa{} regularisere
dataformatet fra adverbavledningen (del \ref{deklinasjon}). \prog{lexc} er et
verkt\o{}y for \aa{} skrive leksikon, og spesifiserer regul\ae{}re relasjoner
som h\o{}yrerekursive grammatikker. Hoveddelen av applikasjonen er
implementert i \prog{lexc}. \prog{twolc} spesifiserer relasjoner i form av
kontekstsensitive regler, men som nevnt over er uttrykkskraften likevel
begrenset til regul\ae{}re relasjoner p\aa{} grunn av antagelsen om at bare
\'en regel kan benyttes p\aa{} et vilk\aa{}rlig punkt i inputstrengen.
\cite{xfst,twolc}

Automatene som XFST genererer har den nyttige egenskapen at de kan kj\o{}res i
begge retninger, det vil si at en automat som analyserer morfologi ogs\aa{}
kan generere former fra en analyse, og en generator kan analysere former. Jeg
har benyttet meg av denne egenskapen, og koden som er skrevet spesifiserer en
\emph{generator} for latinsk morfologi, ikke en analysator. Men siden
resultatet er en automat som g\aa{}r i begge retninger fungerer den like godt
som analysator. Dette har lettet implementasjonen betraktelig av to grunner:
For det f\o{}rste er alle beskrivelser av morfologien strukturert som
beskrivelser av hvordan en overflateform dannes fra en analyse; for det andre
er det kognitivt lettere for meg \aa{} ta for meg en b\o{}yningsklasse og
hvilke endelser de forskjellige formene tar enn \aa{} enumerere alle mulige
analyser for en gitt endelse. I all hovedsak har jeg tatt utgangspunkt i
\citeN{eitrem} sin beskrivelse av morfologien (\S\S 8--24 for substantiv og
adjektiv, \S\S 36--41 for verbene). I tillegg var \citeN{ernout} oppklarende i
enkelte detaljer omkring sammentrukne former p\aa{} \w{--vi} i
perfektumssystemet (pp.~209--212).

Webgrensesnittet er et helt grunnleggende grensesnitt mot applikasjonens
fundamentale funksjoner, analyse og generering av latinsk morfologi,
implementert som et CGI-script i Python. Testene er ogs\aa{} skrevet i Python,
men genererer testdata i et format vanligvis brukt for \aa{} teste Perl-kode
(TAP). Jeg har valgt \aa{} gj\o{}re det p\aa{} denne m\aa{}ten ettersom TAP
har en sv\ae{}rt lav terskel for bruk, noe som har gjort at testene kan
implementeres med et minimum av arbeid.

Webgrensesnittet har et ganske rudiment\ae{}rt brukergrensesnitt som burde
v\ae{}re selvforklarende: En b\o{}yd form skrives inn i tekstfeltet og man
klikker p\aa{} ``Analyser'' for \aa{} f\aa{} en liste over analyser, eller man
skriver inn en formbeskrivelse og trykker p\aa{} ``Generer'' og f\aa{}r en
liste genererte former. Formatet p\aa{} analysebeskrivelsene er fors\o{}kt
holdt s\aa{} enhetlig som mulig, p\aa{} formatet
\form{lemma+Klasse[+Info\ldots]} og med rekkef\o{}lgen av informasjonstaggene
s\aa{} intuitiv som mulig. For verb er formatet
\form{lemma+Verb+Tempus+Modus+PersTall+Diatese}, for substantiver
\form{lemma\-+Noun\-+Kasus\-+Tall}, for adjektiver
\form{lemma\-+Adj\-+Grad\-+Kj\o{}nn\-+Kasus\-+Tall}, og for adverb
\form{lemma+Adv+Grad}.

Koden er tilgjengelig fra
\link{http://heim.ifi.uio.no/arnskj/latin/morphology.tar.gz}. Arkivet
inneholder flere filer og kataloger, men de mest interessante for oss er
\prog{nouns-lexc.txt} og \prog{verbs-lexc.txt} som inneholder
leksikondefinisjonene for nominalsystemet og verbalsystemet, og
\prog{nouns-twolc.txt} og \prog{verbs-twolc.txt} som inneholder de fonetiske
reglene. I tillegg inneholder \prog{build/} scriptene som brukes for \aa{}
bygge systemet. Se ellers \prog{README} for en utf\o{}rlig beskrivelse av de
forskjellige filene og katalogene. Koden til webgrensesnittet er ikke
inkludert, ettersom den forel\o{}pig er avhengig av \aa{} kj\o{}re fra en
katalog p\aa{} mitt hjemmeomr\aa{}de.

\subsection{Nominalsystemet}
\label{deklinasjon}
Nominalmorfologien er den delen av systemet som ble skrevet f\o{}rst, og
ogs\aa{} den enkleste. Den latinske nominalmorfologien er forholds enkel, og i
motsetning til for eksempel sanskrit er det ingen vanskelige fenomener som
lydendringer innad i b\o{}yningsr\o{}ttene. De f\aa{} tilfellene av
lydendringer i m\o{}tet mellom rot og endelse er enkle \aa{} hanskes med.
Dette gir en oppbygning der hver rot er bundet mot en b\o{}yningsklasse, og
hver klasse har et sett med endelser for hver enkelt form.

I den f\o{}rste iterasjonen var nominalmorfologien kun definert i
leksikonfilen, og trengte ingen fonetiske regler. Det er to grunner til dette:
For det f\o{}rste er morfologien som regel s\aa{} enkel at fonetiske regler
ganske enkelt er overfl\o{}dig. For det andre er de f\aa{} endringene som
finnes tiln\ae{}rmet leksikaliserte. Rent lingvistisk hadde det kanskje
v\ae{}rt riktigere \aa{} modellere flere av disse fenomenene med fonetiske
regler, for eksempel \w{reg-s} > \w{rex}, eller \w{severitas-is} >
\w{severitatis}, men \aa{} implementere dette korrekt ville v\ae{}rt krevende.
Dessuten er disse endringene s\aa{}pass varierte at det er lettere \aa{} legge
all informasjonen i leksikon og anse hele prosessen som leksikalisert.
Ogs\aa{} for \aa{} lette implementasjonen anses stammefinal vokal i f\o{}rste
og fjerde deklinasjon som endelsesinitial, slik at bortfallet av vokalen i
dativ/ablativ kan h\aa{}ndteres i leksikon i stedet for med fonetiske regler.

Dette f\o{}rsteutkastet h\aa{}ndterte ord fra alle fem
b\o{}yningsm\o{}nsterene, men adjektivene og en del variasjoner av de
grunnleggende m\o{}nsterene, s\ae{}rlig i andre deklinasjon, manglet.
Innimellom f\o{}rste og andre revisjon av nominalsystemet ble
f\o{}rsteutkastet til verbene skrevet, og jeg tok med en del l\ae{}rdom
tilbake fra det. Det er ett fenomen i nominalsystemet som bruker fonetiske
regler: synkope i \w{--er}-endelsen foran b\o{}yningsmorfem. Dette er
implementert slik at \w{e} som faller bort er markert som s\aa{}dan i
leksikon, og den fonetiske regelen fjerner alle slike foran \w{r} og
morfemgrense. Opprinnelig var denne regelen mer generell (og krevde ikke
markering i leksikon), og synkoperte ganske enkelt alle \w{--er} til \w{--r}
foran morfemgrense, unntatt i r\o{}ttene \w{puer}, \w{gener}, \w{socer},
\w{liber}, \w{vesper} og \w{signifer}. Men det viser seg at ikke alle
r\o{}tter p\aa{} \w{--er} skal ha synkope, for eksempel \w{numerus}, og at
synkopen er leksikalisert (se for\o{}vrig del \ref{diskusjon} for mer om
dette).

Adjektivb\o{}yningen h\aa{}ndteres p\aa{} akkurat samme m\aa{}te som
substantivene, inkludert \w{e}-synkope. Derimot er avledningen av adverb noe
utradisjonelt implentert. Adverbavledning er implementert slik at de
forskjellige adverbformene er avledet fra adjektivets b\o{}yningsstamme i den
tilsvarende b\o{}yningsgraden. Dessverre inneb\ae{}rer dette at den genererte
analysen blir \form{lemma+Adj+Pos+Adv} eller tilsvarende, noe som helt klart
ikke er optimalt. Jeg har derfor lagt til en omskrivningsregel p\aa{} toppen
av substantivleksikonet som skriver om analyser p\aa{} denne formen til den
korrekte formen: \form{lemma+Adv+Pos}. Partisipper p\aa{} samme m\aa{}te som
adjektiver, men uten gradb\o{}yning og adverbavledning.

Selve koden for nominalsystemet kan deles inn i to hoveddeler, \'en for
substantiver og \'en for adjektiver og partisipper. Substantivdelen er videre
delt inn i fem deler, \'en for hver deklinasjon. Innad i de forskjellige
deklinasjonene har jeg fors\o{}kt \aa{} spesifisere like endelser p\aa{} ett
enkelt sted, og \aa{} komponere forskjellige grupper endelser sammen til de
forskjellige m\o{}nstrene i den enkelte deklinasjonen. Adjektivdelenen f\aa{}r
alle sine tematiske endelser, det vil si de fra f\o{}rste og andre
deklinasjon, fra de relevante endelsene i substantivdelen, men endelsene etter
tredje deklinasjon f\o{}lger et litt avvikende m\o{}nster, og minste motstands
vei n\aa{}r denne delen av koden ble skrevet var \aa{} ganske enkelt
spesifisere de av endelsene som er like en gang til i adjektivleksikonet.

\subsection{Verbalsystemet}
\label{konjugasjon}
Verbalmorfologien er den mest kompliserte og interessante delen av systemet;
som for nominalene er den delt inn i en leksikondel som inneholder mesteparten
av koden, og et sett fonetiske omskrivningsregler. Reglene i verbleksikonet
tar leksikonformer og skriver dem om til r\o{}tter etterfulgt av en streng
morfemer. For eksempel er resultatet for \w{amo} presens konjunktiv 2.~person
entall passiv (\form{amo+Verb+Pres+Subj+2S+Pass}) \w{ama-e-ris}. Denne
mellomformen behandles s\aa{} av de fonetiske reglene som setter inn korrekte
temavokaler og h\aa{}ndterer bortfall av lyder; for eksempel omskrives
\w{ama-e-ris} til \w{ameris} og \w{reg-ris} til \w{regeris}. Tabellene
\ref{endelser} og \ref{tempus} gir en oversikt over de viktigste person-- og
tempusendelsene, som brukes i systemet.

\begin{table}
\begin{center}
\begin{tabular}{|c|c|c|c|}
    \hline
       & \multicolumn{2}{c|}{Presens} & \multirow{2}{*}{Perfektum} \\ \cline{2-3}
       & Aktiv & Passiv & \\
    \hline
1.~sg. & \w{--m}   & \w{--r}    & \w{--i}     \\
2.~sg. & \w{--s}   & \w{--ris}  & \w{--isti}  \\
3.~sg. & \w{--t}   & \w{--tur}  & \w{--it}    \\
1.~pl. & \w{--mus} & \w{--mur}  & \w{--imus}  \\
1.~pl. & \w{--tis} & \w{--mini} & \w{--istis} \\
1.~pl. & \w{--nt}  & \w{--ntur} & \w{--erunt} \\
    \hline
\end{tabular}
\caption{Personendelsene}
\label{endelser}
\end{center}
\end{table}

\begin{table}
\begin{center}
\begin{tabular}{|c|c|c|}
    \hline
                  & Indikativ   & Konjunktiv \\
    \hline
Presens           & $\emptyset$ & \w{--e} (1), \w{--a} (2, 3, 4) \\
Imperfektum       & \w{--ba} (1, 2), \w{--eba} (3, 4) & \w{--re} \\
Futurum           & \w{--b} (1, 2), \w{--e} (3, 4) & --- \\
    \hline
Perfektum         & $\emptyset$ & \w{--eri} \\
Pluskvamperfektum & \w{--era} & \w{--isse} \\
Futurum exactum   & \w{--eri} & ---        \\
    \hline
\end{tabular}
\caption{Tempussuffiksene}
\label{tempus}
\end{center}
\end{table}

I likhet med nominalleksikonet er ogs\aa{} verballeksikonet delt opp i flere
deler, \'en del for hver konjugasjon i dette tilfellet. I alle konjugasjonene
er avledningen av perfektumstammen fra presensstammen ansett som leksikalsk,
og for ikke-deponente verb reflekteres dette i at de to systemene defineres av
forskjellige leksikon, og at hvert verb m\aa{} spesifiseres to ganger: en gang
med presensstammen for presenssysteme, og en gang med perfektumstammen for
perfektumsystemet. Deponente verb i de enkelte klassene har egne leksikon hvor
bare passivformene inng\aa{}r.

Perfektumleksikonet er felles for de fire konjugasjonene, og inneholder regler
for de fem finitte formene i perfektumsystemet, perfektum indikativ og
konjunktiv, pluskvamperfektum indikativ og konjunktiv, futurum exactum, og
perfektum infinitiv. I presenssystemet har hver konjugasjon sitt eget
leksikon, men for de forskjellige formene er det st\o{}rre eller mindre grad
av overlapp. Presens indikativ, presens konunktiv og imperfektum konjunktiv er
felles for alle fire konugasjonene, og deles mellom de forskjellige delene.
F\o{}rste og andre konjugasjon, og tredje og fjerde konjugasjon deler reglene
for imperfektum indikativ og futurum. I imperativ og infinitiv har tredje
konjugasjon egne m\o{}nstre der de andre har felles, mens i presens konjunktiv
er det f\o{}rste konugasjon som skiller seg ut. Til slutt m\aa{} det ogs\aa{}
nevnes at verbene med stamme p\aa{} kort \w{i} (``3B-konjugasjonen'') er
markert spesielt i leksikon for \aa{} skille dem fra verbene etter fjerde
konjugasjon.

I motsetning til i nominalsystemet er fonetiske regler en sentral del av
verbalmorfologien, og uten disse reglene ville verballeksikonet ha blitt langt
mer komplisert og uoversiktlig. Grovt sett kan vi dele inn reglene i tre: \'en
regel for \aa{} h\aa{}ndtere bortfall av stammefinal \w{--a} foran
vokalendelser (dvs.~f\o{}rste konjugasjon f\o{}rste person entall presens
indikativ aktiv og passiv, og f\o{}rste konjugasjon presens konjunktiv), fem
regler for \aa{} h\aa{}ndtere temavokaler i tredje og fjerde konjugasjon, og
fire regler for \aa{} h\aa{}ndtere synkoperte perfektumsformer der
perfektumstammen slutter p\aa{} vokal pluss \w{v}. Se ellers del
\ref{verbphon} p\aa{} side \pageref{verbphon} for en n\o{}ye gjennomgang av de
fonetiske reglene for verbalsystemet.

\subsection{Verifisering}
For \aa{} kontrollere at endringer i en del av koden ikke \o{}delegger andre
deler av programmet har jeg utviklet en rekket tester. Testene er implementert
som Python-programmer som genererer output etter protokollen ``Test Anything
Protocol'' (TAP). Programmet \prog{prove} kj\o{}rer s\aa{} alle
testprogrammene, tolker resultatene og skriver ut statistikker. Testene er
skrevet slik at for hvert par av leksikonform og korrekte former blir de
mulige overflateformene i f\o{}lge reglene generert, og programmet sjekker at:
1) reglene genererer samme antall former som er spesifisert i testprogrammet
og 2) alle formene i testprogrammet blir generert. Totalt blir det utf\o{}rt
5887 tester, for 3018 overflateformer (inklusive tilfeller der forskjellige
leksikonformer har samme overflateform). Testene er i stor grad generert ved
hjelp av klipp-og-lim og erstatninger ved hjelp av regul\ae{}re uttrykk,
s\aa{} man skal ikke se bort i fra det kan v\ae{}re feil i testene, men i de
tilfellene testene og systemet har v\ae{}rt uenige har jeg f\o{}rst konsultert
grammatikker for \aa{} kontrollere hva som er korrekt, og rettet den delen som
var feil. Jeg velger derfor \aa{} tolke det store antallet former som testes
som en indikasjon p\aa{} at det er relativt f\aa{} feil.

\subsection{Videre utvikling}
Systemet i sin n\aa{}v\ae{}rende tilstand er langt ifra ferdig, og kan vel
heller ikke sies \aa{} v\ae{}re s\ae{}rlig nyttig. Den kanskje enkleste
m\aa{}ten \aa{} \o{}ke systemets nytteverdi p\aa{} ville nok v\ae{}re \aa{}
\o{}ke st\o{}rrelsen p\aa{} leksikonet. Dette vil fordre flere endringer i
hvordan systemet bygges; s\ae{}rlig viktig vil det v\ae{}re \aa{} skille ut de
h\aa{}ndkodede avledningsreglene fra spesifikasjonene av hvilke lemmaer som
f\o{}lger hvilke m\o{}nstre. Man m\aa{} deretter skrive kode som tar en
lemmaliste, genererer den korrekte \prog{lexc}-koden og komponerer den med de
h\aa{}ndskrevne reglene til den endelige koden som kompileres. Dette vil
forh\aa{}pentligvis \o{}ke dekningen til systemet betraktelig i forhold til
arbeidsmengden som kreves for \aa{} utf\o{}re arbeidet. PROIEL-prosjektet og
Perseus er begge gode kandidater for lemmalister.

Foruten \aa{} generelt \o{}ke st\o{}rrelsen p\aa{} leksikonet m\aa{} ogs\aa{}
de mer uregelmessige delene av morfologien tas med i systemet. Det er en del
marginale tilfeller i nominalsystemet som ikke er implementert, s\ae{}rlig
viktig er kanskje ordene i tredje deklinasjon med genitiv flertall p\aa{}
\w{--ium}, som enn\aa{} ikke er implementert. Implementasjonen av disse ordene
vil ogs\aa{} v\ae{}re en anledning til \aa{} f\aa{} adjektivparadigmene etter
tredje deklinasjon og substantivene etter samme til \aa{} benytte seg av samme
kode.

Pronomenb\o{}yningen er forel\o{}pig fullstendig oversett, noe som absolutt
m\aa{} rettes opp i en fullverdig analysator. P\aa{} samme m\aa{}te m\aa{} en
del uregelmessige verb tas med i systemet, s\ae{}rlig viktig er kanskje
\w{sum}, \w{possum} og \w{eo}. Den beste m\aa{}ten \aa{} h\aa{}ndtere defekte
verb som \w{aio} og \w{inquam} p\aa{} m\aa{} ogs\aa{} vurderes.

Til slutt burde ogs\aa{} systemet utsettes for brukere for \aa{} luke ut
eventuelle feil som har sneket seg inn. Jeg er ganske sikker p\aa{} at det er
f\aa{} feil i analysene av former som faktisk er korrekte latinske former, men
hvorvidt systemet overgenererer eller ikke er et noe mer \aa{}pent
sp\o{}rsm\aa{}l. Jeg har gjort en del kontroll etter overgenerering uten \aa{}
finne noe, men omfattende brukertesting er uerstattelig.

\section{Diskusjon}
\label{diskusjon}
En morfologisk modell er synkron av natur, men det kan kan ogs\aa{} v\ae{}re
interessant \aa{} se hvordan den synkrone modellen passer med den diakrone
utviklingen av det morfologiske systemet. La oss for eksempel se p\aa{}
eksempelet med substantivr\o{}tter p\aa{} \w{--er} med synkope foran endelse.
\citeN{ernout} gir en beskrivelse der r\o{}ttene med synkope opprinnelig var
r\o{}tter p\aa{} \w{--r} som fulgte det vanlige m\o{}nsteret, men i
nominativsformen f\o{}lgende skjedd: \w{--ros} > \w{--rs} > \w{--rr} >
\w{--\tipa{\r*r}} > \w{--er}. Vokalen i nominativsendelsen (som opprinnelig
var \w{o}) falt fort foran \w{r}, \w{s} ble s\aa{} assimilert til \w{r},
dobbel \w{r} ble trukket sammen til syllabisk \w{\tipa{\r*r}} som s\aa{} ble
til \w{er}. Men denne endringen tok ikke sted i r\o{}tter der \w{--r} kom fra
en \w{s} som var blitt stemt mellom vokaler, som for eksempel \w{numerus}, og
vi ser hvordan disse formene har blitt leksikalisert.

I forlengelsen av dette kunne det ha v\ae{}rt interessant \aa{} se om det
g\aa{}r an \aa{} modellere lydendringene i latin over tid med endelige
tilstandsteknikker slik vi har modellert formverket og synkrone lydlover i
morfologien. \citeN{historical} p\aa{}peker at det \aa{} legge til denne typen
derivasjon i synkron grammatikk er teoretisk meget problematisk
(pp.~236--237), men i dette tilfellet er det ikke synkrone, men diakrone
forhold vi \o{}nsker \aa{} modellere. De fleste historiske endringer er
formulert som lydendringer, og burde passe veldig godt inn i
toniv\aa{}paradigmet vi har benyttet oss av her. Vi kan s\aa{} implementere de
forskjellige strataene av lydendringer som egne sett med fonetiske regler, og
eksperimentere med resultatene av \aa{} komponere disse settene i forskjellige
rekkekf\o{}lger.

Det kan ogs\aa{} diskuteres hvorvidt systemet burde skille mellom lang og kort
vokal. Dette er en fonemisk st\o{}rrelse i latin, og det er derfor mulig at
dette kunne v\ae{}rt nyttig informasjon for de fonetiske reglene; vi kan
faktisk anse markeringen av stammefinal kort \w{--i} i 3B-verbene som en
ad-hoc notasjon for \aa{} skille mellom de to kvantitetene, men dette er ikke
systematisk gjennomf\o{}rt. Jeg har forel\o{}pig ikke gjort noe med dette,
s\ae{}rlig fordi id\'een kom ganske sent, men ogs\aa{} fordi notasjon av
vokalkvantiteter ikke er vanlig utenfor ordb\o{}ker og oppslagsverk, noe som
medf\o{}rer at mitt forhold til vokalkvantiteter i latin heller ikke like
aktivt som i for eksempel sanskrit, hvor kvantitetene er en del av
rettskrivningen. Gitt den begrensede utviklingstiden har jeg derfor valgt
\aa{} ikke gj\o{}re noe mer med denne muligheten, men det kan vurderes for
eventuell videreutvikling av systemet.

\clearpage
\bibliographystyle{norchicago}
\bibliography{report}{}

\tableofcontents
\listoftables

\clearpage
\appendix

\section{Fonetiske regler for verbalsystemet}
\label{verbphon}
I koden som f\o{}lger har hver regel f\o{}rst en beskrivelse av regelen,
s\aa{} selve regelspesifikasjonen, et par tegn adskilt av \code{:} der tegnet
til venstre i leksikonformen blir omskrevet til tegnet til h\o{}yre i
overflateformen. \code{0} angir at tegnet blir fjernet s\aa{} en operator som
angir om korrespondansen er obligatorisk (\code{<=>}), valgfri (\code{=>})
eller forbudt (\code{/<=}) og til slutt en serie kontekster der
korrespondansen forekommer. \code{\_} angir posisjonen korrespondansen
forekommer i, tegnsekvensene til venstre angir tegnene som kommer f\o{}r og
tegnene til h\o{}yre tegnsekvensen etter. Den kontekstsensitive regelen
$\alpha \to \beta/\gamma \_ \delta$ blir alts\aa{} \code{$\alpha$:$\beta$ <=>
$\gamma$ \_ $\delta$} i denne notasjonen. I kontekstspesifikasjonene angir
\code{a:} betyr at tegnet \w{a} i leksikonformen kan korrespondere med et
vilk\aa{}rlig tegn i overflateformen, og \code{:a} at \w{a} i overflateformen
kan korrespondere med et vilk\aa{}rlig tegn i leksikonformen. Se ellers
\citeN{twolc} for en utf\o{}rlig introduksjon til syntaks og semantikk til
\prog{twolc}-regler.

Det som f\o{}lger er hele filen \code{verbs-twolc.txt} (minus kommentarer),
med glosser.

\lstset{basicstyle=\small,numbers=left}
\begin{lstlisting}[name=verbs-twolc.txt]
Alphabet a b c d e f g h i I:i k l m n o p q r s t u v w x y z %-:0 ;
\end{lstlisting}

Aller f\o{}rst definerer vi alfabetet. \code{I} angir et 3B-verb i leksikon,
og omskrives til \w{i} i overflaten. \code{-} angir morfemgrense og skrives om
til ingenting. \code{-} er prefigert med \code{\%} siden \code{-} alene har
spesiell betydning i \prog{twolc} (\code{\%} har samme funksjon som
$\backslash$ i de fleste andre programmeringsspr\aa{}k).

\begin{lstlisting}[name=verbs-twolc.txt]
Sets
    V = a e i o u ;
    C = b c d f g h k l m n p q r s t v w x y z ;
\end{lstlisting}

Vi definerer konsonanter og vokaler som delmengder av alfabetet.

\begin{lstlisting}[name=verbs-twolc.txt]
Definitions
    Cons = [ C | q u ] ;
\end{lstlisting}

Vi trenger ogs\aa{} en spesialdefinisjon for konsonanter ettersom digrafen
\w{qu} regnes som en konsonant i latinsk ortografi.

\begin{lstlisting}[name=verbs-twolc.txt]
Rules
"-a drop before -o and -e"
a:0 <=> _ %-: [ o | e ] ;
\end{lstlisting}

\w{a} foran morfemgrense etterfulgt at \w{e} eller \w{e} faller bort. Dette
h\aa{}ndterer f\o{}rstepersonformene i presens indikativ og alle formene i
presens konjunktiv av verb etter f\o{}rste konjugasjon, som ikke har
stammefinal \w{--a}.

\begin{lstlisting}[name=verbs-twolc.txt]
"-i theme vowel between consonant and s, t and m"
%-:i <=> Cons _ [ s | t | m ] ;

"-e theme vowel before -r"
%-:e <=> Cons _ r ;

"Short -i to -e before -r"
I:e <=> _ %-: r ;

"-u theme vowel between consonant and n"
%-:u <=> [ Cons | \%-: \e \r :i | .#. (i^1,2) :i ] _ n ;
\end{lstlisting}

Disse fire reglene h\aa{}ndterer temavokaler i tredje og fjerde konjugasjon.
Den f\o{}rste regelen skriver om morfemgrensen til \w{i} mellom konsonant og
\w{s}, \w{t} eller \w{m} (de eneste konsonantene som forekommer f\o{}rst i en
verbalendelse, foruten \w{r} og \w{n}). De to neste reglene setter inn \w{e} som
temavokal foran \w{r}. Den f\o{}rste h\aa{}ndterer konsonantstammer, den andre
3B-verbene.

Den siste regelen setter inn \w{u} som temavokal etter konsonant og \w{i}, men
regelen er mer komplisert enn de andre ettersom leksikon vil produsere
\w{-eri-nt} og \w{-eri-ntur} i tredje person flertall av perfektum konjunktiv
og futurum exactum. Det er derfor litt ekstra koden for \aa{} forhindre at
disse endelsene blir realisert som \w{eriunt} og \w{eriuntur}.

\begin{lstlisting}[name=verbs-twolc.txt]
"Loss of -I before present passive infinitive and first person imperative ending"
I:0 <=> _ %-: [ i | e ] .#. ;
\end{lstlisting}

Denne regelen h\aa{}ndterer bortfall av kort \w{i} i 3B-verb foran endelsen i
presens aktiv imperativ singularis og presens infinitiv passiv.

\begin{lstlisting}[name=verbs-twolc.txt]
"Weird perfects, -v loss"
v:0 => a _ %-: [ i: | e: ] [ s | r ] ;
       i _ %-: [ i: | e: ] ;
       e _ %-: [ i: | e: ] ;

"Stop -v syncope when it would cause confusion with other forms"
v:0 /<= a _ %-: ? r e .#. ;

"Weird perfects, -i loss"
i:0 <=> a v:0 %-: _ ;
        i v:0 %-: _ s ;

"Weird perfects, -e loss"
e:0 <=> a v:0 %-: _ ;
\end{lstlisting}

De fire siste reglene definerer reglene for synkoperte perfektumformer. Dette
er lagt opp rundt en definisjon er \w{v} valgfritt kan synkoperes i en del
kontekster (den f\o{}rste regelen), unntatt de der det ville medf\o{}re
forvirring med andre former (den andre regelen). Denne synkoperingen
medf\o{}rer s\aa{} enkelte andre obligatoriske synkoper i gitte kontekster (de
to siste reglene).

\end{document}
